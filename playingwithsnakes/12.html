
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<title>Playing with Snakes | Files: Long Term Storage </title>
	<link rel='stylesheet' href='style.css' type='text/css' media='screen' />
    <!--[if IE]>
    <style type='text/css'>
    #content {
         padding-top:3em;
    }
    </style>
    <![endif]-->
</head>
<body>
	<div id='topbar'>
		<div class='yellowButton'><a href='../playingwithsnakes.html'>Playing with Snakes</a></div>
		<div class='yellowButton' id='menu'><p style='margin-top:0px;margin-bottom:0px'>Files: Long Term Storage </p><ol start='0'><li><a href='0.html' class='droplink'>Introduction </a></li><li><a href='1.html' class='droplink'>Basics </a></li><li><a href='2.html' class='droplink'>Variables </a></li><li><a href='3.html' class='droplink'>Basic Operations </a></li><li><a href='4.html' class='droplink'>Conditionals </a></li><li><a href='5.html' class='droplink'>Loops </a></li><li><a href='6.html' class='droplink'>Random Numbers </a></li><li><a href='7.html' class='droplink'>Handling Errors </a></li><li><a href='8.html' class='droplink'>Storing Lots of Data: Dictionaries </a></li><li><a href='9.html' class='droplink'>Storing Lots of Data: Lists </a></li><li><a href='10.html' class='droplink'>Being Lazy with Functions </a></li><li><a href='11.html' class='droplink'>Recursion: Calling yourself </a></li><li><span style='font-weight:bold'><a class='droplink' href='12.html'>Files: Long Term Storage </a></span></li></ol></div><div class='yellowButtonRight'>&gt;</div><div class='yellowButtonRight'><a href='12.html#top'>&and;</a></div><div class='yellowButtonRight'><a href='11.html'>&lt;</a></div></div>

	<div id='content'>
	<a name='top'></a><h1>Chapter 12: Files: Long Term Storage </h1><blockquote>Hofstadter's Law:
<br>
It always takes longer than you expect, even when you take into account Hofstadter's Law.
<br>
</blockquote><p>So if you'll recall, a few chapters back we build a program to keep track of where all the zombies are. We'd end up with data like this:</p>
<pre>{'braaain':{'speed':5,'swim':False,'height':70,'dance':"not bad"},
'grawg':{'speed':3,'swim':True,'height':70,'dance':"Excellent"},
'Kelly':{'speed':6,'swim':False,'height':65,'dance':'Mediocre'}}
</pre><p>That tells us where our zombies are. We also had a list that told us what supplies we had:</p>
<pre>['food','water','zombie repellent','tent','chainsaw']
</pre><div class="sidebar">
							<div class="sidebartitle">&lt;sidebar&gt;</div>
							<hr><p>This is a good time to remember exceptions. When you open a file, your program will crash if the user has done something crazy like moved or renamed the file. Since your program can control user behavior like this, you should use an <span class="codelike">except</span> to catch this error and report to the user that you can't find their file.</p>
<hr>
							<div class="sidebartitle">&lt;/sidebar&gt;</div>
						</div><p>That's great and all, but let's admit one terrifying truth right now: Eventually they're going to overrun us, and we're going to need to move. In that case, what happens when we power our zombie simulator down in order to take it with us? All our zombie information is going to disappear! In order to save information when the computer turns off, we need to save information to a <i>file</i>.</p>
<h2>Reading and Writing files
</h2>
<p>The simplest way to read a file is through the <span class="codelike">open</span> function. <span class="codelike">open</span> takes two arguments - the location of the file, and the <i>mode</i> we want to open the file in. The location is pretty easy to understand, it's just a string that describes the file's location on the computer - like "C:\My Documents\zombies.txt" or "/home/me/zombies.txt".</p>
<p>Modes are trickier. First of all, they're optional. By default, Python will assume you want to open your file in read only mode. So by default, Python uses 'r' as the mode. This is good. Opening a file in read mode prevents you from accidentally overwriting data.</p>
<p>But if you want to do something else, like writing or appending, you have other options. If we open the file in append mode, using <span class="codelike">'a'</span>, then we can write to the end of the file, but we can't modify any other part. <span class="codelike">'w'</span> overwrites an existing file (or creates a new one if there isn't one) and allows you to only write. <span class="codelike">'r+'</span> opens a file for reading and writing.</p>
<p>I assume that since the above was a lot of text, and you're in a hurry to get away from the zombies, you'd prefer it in a table. Here you go:</p>
<div class="sidebar">
							<div class="sidebartitle">&lt;sidebar&gt;</div>
							<hr><p>There's also a binary mode for opening files, which uses <span class="codelike">'b'</span>. This isn't important if your file is only going to contain text, like ours, but if you're manipulating a picture, music, or some other type of binary data, then you should be sure to open the file in a mode like <span class="codelike">'r+b'</span>, which would open a binary file in read/write mode.</p>
<hr>
							<div class="sidebartitle">&lt;/sidebar&gt;</div>
						</div><table><tr><th>Character</th><th>Mode</th><th>Description
</th></tr>
<tr><td>r</td><td>read</td><td>can only read data
</td></tr>
<tr><td>w</td><td>write</td><td>can only write data, destroys existing file
</td></tr>
<tr><td>a</td><td>append</td><td>can only add on to end of file
</td></tr>
<tr><td>r+</td><td>read and write</td><td>can read or write to any part of the file
</td></tr>
</table><p>So, since we're moving locations here, let's open a new file for writing. I'll assume you're on a Unix like system, since that's the type of computer system they use in <i>Jurassic Park</i> and the one most likely to be useful for corralling dinosaurs.</p>
<div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f = <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/home/us/zombieDB.txt'</span>,<span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><h2>Writing Data to a File
</h2>
<p>Before you read in to this too far, understand that I'm going to be going into an in depth way to store our zombies, and then providing a really easy way to do it at the bottom. So, skim this section, as it's important for reading regular text files, but understand that there's a super easy way to store dictionaries, lists, and other objects that I'll explain at the bottom.</p>
<div class="sidebar">
							<div class="sidebartitle">&lt;sidebar&gt;</div>
							<hr><p>Only read strings? This is only kind of true. See Pickling at the bottom.</p>
<hr>
							<div class="sidebartitle">&lt;/sidebar&gt;</div>
						</div><p>Now we've got our file open, so let's write our data. Python is really good at writing anything at all, but there's a limitation: it can only read strings, so we need to settle on a standard way of writing data to our file to make it easy to read. Here's my plan:</p>
<pre>Current Date
Start Equipment
Object 1
Object 2
etc
End Equipment
Start Zombies
Name:Zombie Name
Speed:Zombie Speed
etc
End Zombies
</pre><p>We're putting a couple things in that there will make it easy to read this file later. First, we're putting the words "Start Equipment" and "End Equipment" to note where our equipment is. We're also doing the same for the Zombies. Second, we're pairing Zombie stats with the type of stat they are, making it easy to add these to a dictionary.</p>
<p>We'll write everything using the <span class="codelike">write</span> method of the <span class="codelike">file</span> object we used earlier.</p>
<div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">datetime</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">zombies = <span style="color: black;">&#123;</span><span style="color: #483d8b;">'braaain'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'speed'</span>:<span style="color: #ff4500;">5</span>,<span style="color: #483d8b;">'swim'</span>:<span style="color: #008000;">False</span>,<span style="color: #483d8b;">'height'</span>:<span style="color: #ff4500;">70</span>,<span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">&quot;not bad&quot;</span><span style="color: black;">&#125;</span>,</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #483d8b;">'grawg'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'speed'</span>:<span style="color: #ff4500;">3</span>,<span style="color: #483d8b;">'swim'</span>:<span style="color: #008000;">True</span>,<span style="color: #483d8b;">'height'</span>:<span style="color: #ff4500;">70</span>,<span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">&quot;Excellent&quot;</span><span style="color: black;">&#125;</span>,</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #483d8b;">'Kelly'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'speed'</span>:<span style="color: #ff4500;">6</span>,<span style="color: #483d8b;">'swim'</span>:<span style="color: #008000;">False</span>,<span style="color: #483d8b;">'height'</span>:<span style="color: #ff4500;">65</span>,<span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">'Mediocre'</span><span style="color: black;">&#125;</span><span style="color: black;">&#125;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">equipment = <span style="color: black;">&#91;</span><span style="color: #483d8b;">'food'</span>,<span style="color: #483d8b;">'water'</span>,<span style="color: #483d8b;">'zombie repellent'</span>,<span style="color: #483d8b;">'tent'</span>,<span style="color: #483d8b;">'chainsaw'</span><span style="color: black;">&#93;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">#I left off most of the file path, so Python will store it in our</span></div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">#current working directory</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f = <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'zombieDB.txt'</span>,<span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">#This is needlessly precise, but when you're dealing with zombies</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">#you can't be too careful</span></div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #008000;">str</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">datetime</span>.<span style="color: #dc143c;">datetime</span>.<span style="color: black;">now</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> + <span style="color: #483d8b;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Start Equipment<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">for</span> i <span style="color: #ff7700;font-weight:bold;">in</span> equipment:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; f.<span style="color: black;">write</span><span style="color: black;">&#40;</span>i + <span style="color: #483d8b;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;End Equipment<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Start Zombies<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">for</span> name, zombie <span style="color: #ff7700;font-weight:bold;">in</span> zombies.<span style="color: black;">iteritems</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Name:&quot;</span> + name + <span style="color: #483d8b;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #ff7700;font-weight:bold;">for</span> <span style="color: #dc143c;">stat</span>, value <span style="color: #ff7700;font-weight:bold;">in</span> zombie.<span style="color: black;">iteritems</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">stat</span> + <span style="color: #483d8b;">&quot;:&quot;</span> + <span style="color: #008000;">str</span><span style="color: black;">&#40;</span>value<span style="color: black;">&#41;</span> + <span style="color: #483d8b;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;End Zombies<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: black;">close</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><p>While you're here, also check out the <span class="codelike">datetime</span> library, which we can use for date and time functions. It has a lot of options so you can format the time or the date however you'd like.</p>
<p><span class="codelike">close</span> closes the file for us. This means it can't be used any more. While strictly speaking it wasn't necessary in our program (Python closed the file automatically when our program ended), it's usually polite to close what you opened.</p>
<p>Anyway, enough of this, it's time to run to our new, secret, zombie secure facility.</p>
<h2>Reading a file back in
</h2>
<p>Ok, good. We've made it to our new, secret, zombie secure facility. Time to read the file back in.</p>
<p>For this, we'll open our file in read mode, and then loop through the file, one line at a time. Because we put markers in, like "Start Zombies" it will be easy to tell where each part of our file is.</p>
<p>But we actually have three options. If we use the <span class="codelike">readlines</span> method, we can read the entire file into a list all at once. On the other hand, we can use a loop to go through the file one line at a time. For this example, it's best to loop, as we have more than one type of data in the file. But if you were doing something like reading a dictionary into a file, you could just use <span class="codelike">readlines</span>.</p>
<p>But I promised three options, and I've only given two! There's actually two ways to loop. You can loop with a <span class="codelike">for</span> loop, like this:</p>
<div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'file.txt'</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">for</span> line <span style="color: #ff7700;font-weight:bold;">in</span> f:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #ff7700;font-weight:bold;">print</span> line</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><p>Or you can use a <span class="codelike">while</span> loop to loop through and read each line:</p>
<div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'file.txt'</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">while</span> line <span style="color: #66cc66;">!</span>= <span style="color: #483d8b;">''</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #ff7700;font-weight:bold;">print</span> line</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><p>Of these two types we'll be using the <span class="codelike">while</span> loop, since we'll be using nested loops.</p>
<p>Anyway, our program to read the data:</p>
<div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f=<span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'zombieDB.txt'</span>,<span style="color: #483d8b;">'r'</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">equipment = <span style="color: black;">&#91;</span><span style="color: black;">&#93;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">zombies = <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span></div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">rstrip</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">while</span> line <span style="color: #66cc66;">!</span>= <span style="color: #483d8b;">''</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #ff7700;font-weight:bold;">if</span> line == <span style="color: #483d8b;">&quot;Start Equipment&quot;</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">#We use this next readline so we don't add &quot;Start Equipment&quot; to our list</span></div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">rstrip</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #ff7700;font-weight:bold;">while</span> line <span style="color: #66cc66;">!</span>= <span style="color: #483d8b;">&quot;End Equipment&quot;</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; equipment.<span style="color: black;">append</span><span style="color: black;">&#40;</span>line<span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">rstrip</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #ff7700;font-weight:bold;">elif</span> line == <span style="color: #483d8b;">&quot;Start Zombies&quot;</span>:</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">#We use this next line to skip the line that says &quot;Start Zombies&quot;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">rstrip</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #ff7700;font-weight:bold;">while</span> line <span style="color: #66cc66;">!</span>= <span style="color: #483d8b;">&quot;End Zombies&quot;</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">#We stored zombie stats with a : separating the trait and the stat</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">#we'll use split to break that string up into the pair</span></div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; statPair = line.<span style="color: black;">split</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;:&quot;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #ff7700;font-weight:bold;">if</span> statPair<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span> == <span style="color: #483d8b;">&quot;Name&quot;</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; name = statPair<span style="color: black;">&#91;</span>1<span style="color: black;">&#93;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; zombies<span style="color: black;">&#91;</span>name<span style="color: black;">&#93;</span> = <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #ff7700;font-weight:bold;">else</span>:</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; zombies<span style="color: black;">&#91;</span>name<span style="color: black;">&#93;</span><span style="color: black;">&#91;</span>statPair<span style="color: black;">&#91;</span>0<span style="color: black;">&#93;</span><span style="color: black;">&#93;</span> = statPair<span style="color: black;">&#91;</span>1<span style="color: black;">&#93;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">rstrip</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #ff7700;font-weight:bold;">else</span>:</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">rstrip</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">print</span> equipment</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">print</span> zombies</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><p>Most people would consider this code to be really ugly. They'd be right. But you should pay attention to the <span class="codelike">rstrip</span> method on each of our <span class="codelike">readline</span> calls. Look at one of those lines again:</p>
<div class="sidebar">
							<div class="sidebartitle">&lt;sidebar&gt;</div>
							<hr><p>This chapter is really long and boring, so I thought I'd include a few jokes.</p>
<p>Two bytes meet. The first byte asks, “Are you ill?”</p>
<p>The second byte replies, “No, just feeling a bit off.”</p>
<p>Why do programmers get Halloween and Christmas mixed up?</p>
<p>Because OCT31 == DEC25!</p>
<p>Ok, I didn't laugh much either.</p>
<hr>
							<div class="sidebartitle">&lt;/sidebar&gt;</div>
						</div><div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">line = f.<span style="color: #dc143c;">readline</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">rstrip</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><p>Python evaluates functions from left to the right, much like how you read. So first it'll do the <span class="codelike">f.readline()</span>, and give that a value. For us, that value might be something like <span class="codelike">"End Zombies\n"</span>. But wait, where'd that <span class="codelike">\n</span> come from? Remember when we wrote our file, we put a <span class="codelike">\n</span> on the end of every line so that we could have new lines. Now we want to get rid of all the <span class="codelike">\n</span>'s. That's a pretty common operation. So we call <span class="codelike">rstrip</span> and that gets rid of them. We end up with <span class="codelike">"End Zombies"</span>, which we store in <span class="codelike">line</span>.</p>
<p>This opening data program that I wrote is also bad for another reason - when you read in data, it comes in as a string. So the booleans we set on our data earlier will be read as <span class="codelike">"True"</span> and <span class="codelike">"False"</span> instead of <span class="codelike">True</span> or <span class="codelike">False</span>. This might seem subtle, but subtle bugs are usually the hardest to track down.</p>
<p>So, how about a better method?</p>
<h2>Pickling
</h2>
<p>Wouldn't it be super if we could just save our list of equipment and our dictionary of zombies directly, and then read them back? It would. Just agree. This is a common operation, and it's called <i>pickling</i>. Pickling lets you easily store any Python object in a file, and then read it back.</p>
<p>Here's our new program for saving zombie information:</p>
<div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">datetime</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">pickle</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">zombies = <span style="color: black;">&#123;</span><span style="color: #483d8b;">'braaain'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'speed'</span>:<span style="color: #ff4500;">5</span>,<span style="color: #483d8b;">'swim'</span>:<span style="color: #008000;">False</span>,<span style="color: #483d8b;">'height'</span>:<span style="color: #ff4500;">70</span>,<span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">&quot;not bad&quot;</span><span style="color: black;">&#125;</span>,</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #483d8b;">'grawg'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'speed'</span>:<span style="color: #ff4500;">3</span>,<span style="color: #483d8b;">'swim'</span>:<span style="color: #008000;">True</span>,<span style="color: #483d8b;">'height'</span>:<span style="color: #ff4500;">70</span>,<span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">&quot;Excellent&quot;</span><span style="color: black;">&#125;</span>,</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #483d8b;">'Kelly'</span>:<span style="color: black;">&#123;</span><span style="color: #483d8b;">'speed'</span>:<span style="color: #ff4500;">6</span>,<span style="color: #483d8b;">'swim'</span>:<span style="color: #008000;">False</span>,<span style="color: #483d8b;">'height'</span>:<span style="color: #ff4500;">65</span>,<span style="color: #483d8b;">'dance'</span>:<span style="color: #483d8b;">'Mediocre'</span><span style="color: black;">&#125;</span><span style="color: black;">&#125;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">equipment = <span style="color: black;">&#91;</span><span style="color: #483d8b;">'food'</span>,<span style="color: #483d8b;">'water'</span>,<span style="color: #483d8b;">'zombie repellent'</span>,<span style="color: #483d8b;">'tent'</span>,<span style="color: #483d8b;">'chainsaw'</span><span style="color: black;">&#93;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f = <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'zombieDB.txt'</span>,<span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #dc143c;">pickle</span>.<span style="color: black;">dump</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">datetime</span>.<span style="color: #dc143c;">datetime</span>.<span style="color: black;">now</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>,f<span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #dc143c;">pickle</span>.<span style="color: black;">dump</span><span style="color: black;">&#40;</span>equipment,f<span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #dc143c;">pickle</span>.<span style="color: black;">dump</span><span style="color: black;">&#40;</span>zombies,f<span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f.<span style="color: black;">close</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><p>And here's the new code for reading back the data:</p>
<div class="python" style="font-family:monospace;"><ol><li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">pickle</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">f = <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'zombieDB.txt'</span>,<span style="color: #483d8b;">'r'</span><span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">date = <span style="color: #dc143c;">pickle</span>.<span style="color: black;">load</span><span style="color: black;">&#40;</span>f<span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">equipment = <span style="color: #dc143c;">pickle</span>.<span style="color: black;">load</span><span style="color: black;">&#40;</span>f<span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">zombies = <span style="color: #dc143c;">pickle</span>.<span style="color: black;">load</span><span style="color: black;">&#40;</span>f<span style="color: black;">&#41;</span></div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">print</span> date</div></li>
<li style="font-weight: bold; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">print</span> equipment</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #ff7700;font-weight:bold;">print</span> zombies</div></li>
<li style="font-weight: normal; vertical-align:top;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li>
</ol></div><p>Notice that the order data is stored and read in is important. But also notice that <span class="codelike">equipment</span> was read directly into a list, and <span class="codelike">zombies</span> was read in directly as a dictionary. That saves us a lot of time.</p>
<h2>A Friendly Notice
</h2>
<p>Remember how I started this chapter with a sidebar that said to remember exceptions? I didn't include any exception handling in any of the sample code in this chapter because I didn't want to make the examples longer than they already were. But you should be a better programmer than I was here.</p>

        <p>This website will be taken offline before the end of 2011</p>
		</div>
				<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-12720395-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>